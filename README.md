Video Chat Android Sample App
===============================

This application shows how to build a video chat app with OpenTok Android SDK.


Quick Start
-----------
   1. Clone this repository: https://github.com/nexmo-se/video-chat-android.git
   2. Go to video-chat-android folder
   
  Backend:
   3. Go to backend folder: `cd backend`

   4. Run `npm install` to install all dependencies from NPM.

   5. copy the `env.example` file to `.env` and fill the variables needed

   6. Run `node .` to execute node index.js file

   7. Open new terminal, run `ngrok http $SERVER_PORT` to expose local development server.


   Frontend:
  
   8. Open your project in Android Studio.
 
   9. In the ServerConfig file, replace the backendURL variable empty strings
    with the URL generated by ngrok:
 
     ```kotlin
      const val CHAT_SERVER_URL: String = ""
     ```
 
   10. Use Android Studio to build and run the app on an android simulator or device.

   11. After you enter a room name, it connects to an OpenTok session and
   publishes an audio-video stream from your device to the session.

   12. Run the app on a second client. You can do this by deploying the app to an
   iOS device and testing it in the simulator at the same time. Or you can use
   Opentok Playground to connect in a browser (see the following
   section).

   When the second client connects, it also publishes a stream to the session,
   and both clients subscribe to (view) each otherâ€™s stream.


Application Notes
-------------------

   To add a second publisher (which will display as a subscriber in your emulator), either run the app a second time in an android device or use the OpenTok Playground to connect to the session in a supported web browser (Chrome, Firefox, or Internet Explorer 10-11) by following the steps below:

   1. Go to [OpenTok Playground](https://tokbox.com/developer/tools/playground) (must be logged into your [Account](https://tokbox.com/account))
   2. Select the **Join existing session** tab
   3. Click "Yes" for **Have an existing token?** section
   3. Copy the apiToken value from Android Studio debug area in the **Token** input field
   4. Click **Join Session**
   5. On the next screen, click **Connect**, then click **Publish Stream**
   6. You can adjust the Publisher options (not required), then click **Continue** to connect and begin publishing and subscribing


Configuration Notes
-------------------

*   You can test in the Android Studio Simulator or on a supported android device. However, the
    Android Studio Simulator does not provide access to the camera. When running in
    the Android Studio Simulator, an OTPublisher object uses a demo video instead of the
    camera.
